# Обзор проекта: Интернет-магазин "Faida Group"

Этот документ предоставляет исчерпывающий обзор проекта, его архитектуры, технологий и ключевых команд для эффективного взаимодействия с Gemini.

## 1. Краткое описание

**Faida Group Store** — это современный полнофункциональный интернет-магазин, разработанный для продажи халяльных продуктов. Ключевой особенностью проекта является глубокая интеграция с системой **1С**, позволяющая автоматически синхронизировать каталог товаров, цены и остатки.

Проект построен на современной архитектуре с разделением на бэкенд и фронтенд, и полностью контейнеризирован с помощью Docker для упрощения развертывания и разработки.

## 2. Технологический стек

| Сфера | Технология | Описание |
| :--- | :--- | :--- |
| **Бэкенд** | **Django, Django REST Framework** | Основа серверной логики, предоставляет REST API. |
| | **PostgreSQL** | Основная реляционная база данных. |
| | **Redis** | Используется для кэширования данных. |
| | **Celery** | (Указан в `requirements.txt`) Вероятно, для фоновых задач. |
| **Фронтенд** | **React, TypeScript** | Библиотека для построения пользовательского интерфейса. |
| | **Vite** | Современный и быстрый сборщик для фронтенда. |
| | **Tailwind CSS** | CSS-фреймворк для стилизации. |
| | **Zustand** | Легковесное решение для управления состоянием. |
| | **React Query** | Управление состоянием сервера, кэширование API-запросов. |
| **Инфраструктура** | **Docker, Docker Compose** | Контейнеризация и оркестрация всех сервисов проекта. |

## 3. Архитектура и структура проекта

Проект разделен на три основных компонента:

-   `backend/`: Django-приложение, содержащее всю бизнес-логику, API и модели данных.
    -   `apps/`: Модульная структура, где каждое Django-приложение отвечает за свою часть функционала (товары, категории, пользователи, синхронизация с 1С).
    -   `config/`: Основные настройки проекта.
    -   `goods_data/`: (Монтируется из `./data/goods`) Каталог для хранения выгрузок из 1С в формате JSON и медиафайлов.
-   `frontend/`: React-приложение, отвечающее за пользовательский интерфейс и взаимодействие с API.
-   `docker-compose.yml`: Центральный файл, описывающий все сервисы (`backend`, `frontend`, `db`, `redis`, `scheduler`) и их взаимодействие.

## 4. Запуск и разработка

### Быстрый старт

Самый простой способ запустить весь проект — использовать скрипт-обертку:

```bash
python start_project.py
```

### Ручной запуск (через Docker Compose)

1.  **Сборка и запуск контейнеров в фоновом режиме:**
    ```bash
    docker-compose up --build -d
    ```

2.  **Просмотр логов сервисов:**
    ```bash
    # Логи бэкенда
    docker-compose logs -f backend

    # Логи фронтенда
    docker-compose logs -f frontend
    ```

3.  **Остановка всех сервисов:**
    ```bash
    docker-compose down
    ```

### Ключевые адреса (в режиме разработки)

-   **Фронтенд (сайт):** [http://localhost:5173/](http://localhost:5173/)
-   **Бэкенд (API):** [http://localhost:8000/api/](http://localhost:8000/api/)
-   **Админ-панель Django:** [http://localhost:8000/admin/](http://localhost:8000/admin/)
-   **Документация API (Swagger):** [http://localhost:8000/api/docs/](http://localhost:8000/api/docs/)

## 5. Управление данными и синхронизация с 1С

Это центральная часть функционала проекта. Все команды выполняются внутри `backend` контейнера.

```bash
# Вход в контейнер бэкенда
docker-compose exec backend bash

# После входа можно выполнять команды manage.py:
# Полная синхронизация (данные + медиа)
python manage.py import_1c_data pp

# Быстрая синхронизация (только данные)
python manage.py import_1c_data pp --skip-media
```

-   **Автоматическая синхронизация:** В `docker-compose.yml` настроен отдельный сервис `scheduler`, который периодически запускает команду `python manage.py run_scheduler` для автоматического обновления данных.
-   **Источник данных:** Скрипты ожидают найти файлы выгрузки из 1С в директории `data/goods/pp/`.

## 6. Соглашения по разработке

-   **Бэкенд:**
    -   Зависимости управляются через `backend/requirements.txt`.
    -   Переменные окружения (настройки БД, ключи) должны быть в файле `.env` в корне проекта (на основе `.env.example`).
    -   Новый функционал добавляется в виде отдельных Django-приложений в директории `backend/apps/`.
-   **Фронтенд:**
    -   Зависимости управляются через `frontend/package.json`.
    -   Для установки/обновления зависимостей используется `npm install`.
    -   Адрес API бэкенда (`VITE_API_URL`) настраивается через переменные окружения в `docker-compose.yml` для frontend-сервиса.
    -   В `vite.config.ts` настроен прокси для запросов `/api`, `/media`, `/static` на бэкенд-сервис, что позволяет избежать проблем с CORS в режиме разработки.
